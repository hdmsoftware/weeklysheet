"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}angular.module("weeklytimesheetApp",["weeklytimesheetApp.auth","weeklytimesheetApp.admin","weeklytimesheetApp.constants","weeklytimesheetApp.project","weeklytimesheetApp.client","weeklytimesheetApp.worker","weeklytimesheetApp.department","weeklytimesheetApp.workerload","weeklytimesheetApp.allocation","weeklytimesheetApp.holiday","ngCookies","ngResource","ngSanitize","ui.router","ui.bootstrap","validation.match","dynamicNumber","angularMoment"]).value("Config",{BASE_URL:"https://weeklysheet.herokuapp.com/api/"}).config(["$urlRouterProvider","$locationProvider",function(a,b){a.otherwise("/"),b.html5Mode(!0)}]).run(["$rootScope",function(a){a.checkWeekPersonRelationship=function(a,b,c){if(b&&c){var d=parseInt(b,10),e=parseInt(c,10);return a.some(function(a){return a.weekenum===d&&a.WorkerId===e})}},a.checkWeekExists=function(a,b){if(b){var c=parseInt(b,10);return a.some(function(a){return a.weekenum===c})}}}]),angular.module("weeklytimesheetApp.department",[]),angular.module("weeklytimesheetApp.workerload",[]),angular.module("weeklytimesheetApp.allocation",[]),angular.module("weeklytimesheetApp.auth",["weeklytimesheetApp.constants","weeklytimesheetApp.util","ngCookies","ui.router"]).config(["$httpProvider",function(a){a.interceptors.push("authInterceptor")}]),angular.module("weeklytimesheetApp.client",[]),angular.module("weeklytimesheetApp.admin",["weeklytimesheetApp.auth","ui.router"]),angular.module("weeklytimesheetApp.holiday",[]),angular.module("weeklytimesheetApp.worker",[]),angular.module("weeklytimesheetApp.project",[]),angular.module("weeklytimesheetApp.util",[]),function(){function a(a,b,c,d,e){var f;return{request:function(a){return a.headers=a.headers||{},c.get("token")&&e.isSameOrigin(a.url)&&(a.headers.Authorization="Bearer "+c.get("token")),a},responseError:function(a){return 401===a.status&&((f||(f=d.get("$state"))).go("login"),c.remove("token")),b.reject(a)}}}a.$inject=["$rootScope","$q","$cookies","$injector","Util"],angular.module("weeklytimesheetApp.auth").factory("authInterceptor",a)}(),angular.module("weeklytimesheetApp").config(["$stateProvider",function(a){a.state("department",{url:"/department",template:"<department></department>"})}]);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(){var a=function(){function a(b,c,d,e,f,g){_classCallCheck(this,a),this.Holiday=b,this.departments=[],this.$uibModal=c,this.$state=f,this.moment=g,this.holidayId=null,this.openedDate=!1,this.dt=new Date}return a.$inject=["Holiday","$uibModal","$scope","$rootScope","$state","moment"],_createClass(a,[{key:"$onInit",value:function(){var a=this;this.Holiday.getHolidays().then(function(b){a.holidays=b})}},{key:"openDate",value:function(a){a.preventDefault(),a.stopPropagation(),this.openedDate=!0,console.log(this.dt)}},{key:"save",value:function(a){var b=this;if(this.submitted=!0,a.$valid){var c=1;this.Holiday.createHoliday({name:this.holiday.name,actualdate:this.holiday.actualdate,week:c}).then(function(a){b.Holiday.getDepartments().then(function(a){b.holidays=a})})["catch"](function(c){c=c.data,b.errors={},c.name&&angular.forEach(c.fields,function(d){a[d].$setValidity("mongoose",!1),b.errors[d]=c.message})})}}},{key:"editHolidayItem",value:function(a){this.holidayId=a}},{key:"saveCurrentHoliday",value:function(a){var b=this,c=1;this.Holiday.updateHoliday({_id:this.holidayId,name:a.name,actualdate:a.actualdate,week:c}).then(function(){b.holidayId=null,b.$state.go("holiday")})["catch"](function(a){a=a.data,b.errors={},a.week&&angular.forEach(a.fields,function(c){form[c].$setValidity("mongoose",!1),b.errors[c]=a.message})})}}]),a}();angular.module("weeklytimesheetApp").component("holiday",{templateUrl:"app/holiday/holiday.html",controller:a})}(),angular.module("weeklytimesheetApp").config(["$stateProvider",function(a){a.state("holiday",{url:"/holiday",template:"<holiday></holiday>"})}]);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(){var a=function(){function a(b,c,d,e,f,g,h,i,j,k){_classCallCheck(this,a),this.$http=c,this.awesomeThings=[],this.groupedByWeek=[],this.groupedByName=[],this.groupedByNameAndDepartment=[],this.weeklyProjects=[],this.$uibModal=d,this.$scope=f,this.editedItems={},this.weeklyDates=[],this.Project=g,this.Informational="",this.Allocation=h,this.$state=i,this.$window=j,this.finalAllocations=[],this.$parse=b,this.allocationTotal=null,this.maxLoadTotal=null,this.projectTotal=null,this.projectTotalAllocated=null,this.currentWorkerId=null,this.weekSelected=null,this.moment=k,this.currentIsoWeek=null,this.divideByDay=40,this.studioViewActive=!0,this.projectViewActive=!1,this.groupedByProject=[],this.groupedByProjectAndWorker=[],this.groupedByClientAndProjectAndWorker=[],this.projectWorkerCount=0,this.selectedStudioDepartments={},this.selectedProjectDepartments={},this.selectedProjectRoot={},this.selectedClientRoot={},this.currentClient=null,this.groupedByClient=[],this.test=[]}return a.$inject=["$parse","$http","$uibModal","$rootScope","$scope","Project","Allocation","$state","$window","moment"],_createClass(a,[{key:"compute",value:function(a,b){if(a&&a&&b){b=parseInt(b,10);var c=this.groupByItemName(a,b);c[0]?(this.allocationTotal=this.getAllocationTotal(c)/this.divideByDay,this.maxLoadTotal=this.getMaxLoadTotal(c)/this.divideByDay,this.currentWorkerId=c[0].WorkerId):(this.allocationTotal=null,this.maxLoadTotal=null)}}},{key:"computeProjectWorker",value:function(a,b){if(a=parseInt(a,10),b){var c=b.filter(function(b){return b.weekenum===a});c.length>0?(this.projectTotal=c[0].ProjectTotal,this.projectTotalAllocated=c[0].allocated):(this.projectTotal=null,this.projectTotalAllocated=null)}}},{key:"$onInit",value:function(){var a=this;this.calculateAllocations(),this.Project.getProjectsTotalByWorker().then(function(b){a.groupedByProject=a.groupBy(b,"ProjectName"),a.groupedByClient=a.groupBy(b,"ClientName");var c=a;Object.keys(a.groupedByClient).forEach(function(a,b){var d=c.groupBy(c.groupedByClient[a],"ProjectName"),e=[];Object.keys(d).forEach(function(a,b){var f={project:a,children:c.groupByExtended(d[a],"DepartmentName","firstname")};e.push(f)});var f={client:a,children:e};c.groupedByClientAndProjectAndWorker.push(f)})})}},{key:"findClientName",value:function(a){var b=this;return Object.keys(this.groupedByProject).forEach(function(c,d){var e=b.groupedByProject[c][0];if(e.ProjectName===a)return b.currentClient=e.ClientName,!1}),this.currentClient}},{key:"getAllocationTotal",value:function(a){return a.length>1?a.reduce(function(a,b){return a+b.Allocation_Total},0):a[0].Allocation_Total}},{key:"getMaxLoadTotal",value:function(a){return a[0].Max_Load_Total}},{key:"groupByItemName",value:function(a,b){return this.groupedByName[a].filter(function(a){return a.Week===b})}},{key:"groupBy",value:function(a,b){return a.reduce(function(a,c){return(a[c[b]]=a[c[b]]||[]).push(c),a},{})}},{key:"groupBySingle",value:function(a,b){return a.reduce(function(a,c){return(a[c[b]]=a[c[b]]||[]).push(c),a},{})}},{key:"groupByExtended",value:function(a,b,c){return a.reduce(function(a,d){return a[d[b]]?(a[d[b]][d[c]]=a[d[b]][d[c]]||[]).push(d):(a[d[b]]={},(a[d[b]][d[c]]=a[d[b]][d[c]]||[]).push(d)),a},{})}},{key:"calculateAllocations",value:function(){var a=this;this.$http.get("api/allocations/total/allocation").then(function(b){if(b.data.length>0){a.finalAllocations=b.data,a.groupedByWeek=a.groupBy(a.finalAllocations,"Week"),a.groupedByName=a.groupBy(a.finalAllocations,"Name"),a.groupedByNameAndDepartment=a.groupByExtended(a.finalAllocations,"DepartmentName","Name"),a.groupedByWeek=a.addMissingWeeks(a.groupedByWeek);var c=a;Object.keys(a.groupedByWeek).forEach(function(a){var b=new Date(c.moment().day("Monday").week(a));c.weeklyDates.push(b)})}else a.Informational="No data. Please allocate time. Thanks"})}},{key:"addMissingWeeks",value:function(a){var b={},c=null;return Object.keys(a).forEach(function(d){var e=parseInt(d,10);if(b[d]=a[d],c)for(var f=c+1;f<e;f++)b[f]=[];c=e}),b}},{key:"addNumbers",value:function(a,b){return parseInt(a)+parseInt(b)}},{key:"getNumber",value:function(a){return new Array(a)}},{key:"changeView",value:function(a){"studio"===a?(this.studioViewActive=!0,this.projectViewActive=!1):"project"===a&&(this.projectViewActive=!0,this.studioViewActive=!1)}},{key:"openAllocatedHoursModal",value:function(a,b){var c=this;this.Project.getWeeklyProjects(a,b).then(function(b){c.weekSelected=a,c.weeklyProjects=b;var d=c.$uibModal.open({animation:!0,templateUrl:"app/main/modals/project.html",scope:c.$scope,size:"md"});c.cancel=function(){d.close()}})}},{key:"toggleEditing",value:function(a){this.editedItems[a.name]=!this.editedItems[a.name]||!0}},{key:"setDay",value:function(a,b){return a=new Date(a.getTime()),a.setDate(a.getDate()+(b+7-a.getDay())%7),a}},{key:"addDays",value:function(a,b){var c=new Date(a);return c.setDate(c.getDate()+b),c}},{key:"containsObject",value:function(a,b){var c,d=!1;for(c=0;c<b.length;c++)if(b[c][a]){d=!0;break}return d}},{key:"selectStudioDepartments",value:function(a,b){var c=a.target,d=b;this.selectedStudioDepartments[d]?this.selectedStudioDepartments[d]=c.checked:this.selectedStudioDepartments[d]=c.checked}},{key:"selectProjectDepartments",value:function(a,b,c){this.test=c;var d=a.target;this.selectedProjectDepartments[b]?this.selectedProjectDepartments[b]=d.checked:this.selectedProjectDepartments[b]=d.checked}},{key:"selectProjectRoot",value:function(a,b){var c=a.target;this.selectedProjectRoot[b]?this.selectedProjectRoot[b]=c.checked:this.selectedProjectRoot[b]=c.checked}},{key:"selectClientRoot",value:function(a,b){var c=a.target;this.selectedClientRoot[b]?this.selectedClientRoot[b]=c.checked:this.selectedClientRoot[b]=c.checked}},{key:"saveCurrentAllocation",value:function(a){var b=this;this.Allocation.updateAllocation({_id:a._id,allocated:a.allocated}).then(function(){b.$window.location.reload()})["catch"](function(a){a=a.data,b.errors={},a.week&&angular.forEach(a.fields,function(c){form[c].$setValidity("mongoose",!1),b.errors[c]=a.message})})}}]),a}();angular.module("weeklytimesheetApp").component("main",{templateUrl:"app/main/main.html",controller:a})}(),angular.module("weeklytimesheetApp").config(["$stateProvider",function(a){a.state("main",{url:"/",template:"<main></main>"})}]);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(){var a=function(){function a(b,c,d,e,f,g,h,i){_classCallCheck(this,a),this.Worker=b,this.Workerload=c,this.Department=d,this.workers=[],this.workerloads=[],this.$uibModal=e,this.currentWorker={},this.$scope=f,this.$rootScope=g,this.weekAllocatedError=!1,this.workerLoadId=null,this.$state=h,this.workerId=null,this.moment=i,this.departments=[]}return a.$inject=["Worker","Workerload","Department","$uibModal","$scope","$rootScope","$state","moment"],_createClass(a,[{key:"$onInit",value:function(){var a=this;this.Worker.getWorkers().then(function(b){a.workers=b}),this.Department.getDepartments().then(function(b){a.departments=b})}},{key:"save",value:function(a){var b=this;this.submitted=!0,a.$valid&&this.Worker.createWorker({firstname:this.worker.firstname,DepartmentId:this.worker.departmentid}).then(function(a){var c=b.moment(new Date,1).isoWeek();b.Workerload.createWorkerload({weekenum:c,allocated:40,WorkerId:a._id}).then(function(){b.Worker.getWorkers().then(function(a){b.workers=a})})})["catch"](function(c){c=c.data,b.errors={},c.name&&angular.forEach(c.fields,function(d){a[d].$setValidity("mongoose",!1),b.errors[d]=c.message})})}},{key:"saveWorkerload",value:function(a){var b=this;this.submittedWorkerLoad=!0,a.$valid&&!this.weekAllocatedError&&(this.isWeekUsed(this.workerloads,this.workerload.week),this.Workerload.createWorkerload({weekenum:this.workerload.week,allocated:this.workerload.hours,WorkerId:this.currentWorker._id}).then(function(){b.Workerload.getWorkerLoadTime(b.currentWorker._id).then(function(a){b.workerloads=a})})["catch"](function(c){c=c.data,b.errors={},c.week&&angular.forEach(c.fields,function(d){a[d].$setValidity("mongoose",!1),b.errors[d]=c.message})}))}},{key:"isWeekUsed",value:function(a,b){return this.$rootScope.checkWeekExists(a,b)?(this.weekAllocatedError=!0,!0):void(this.weekAllocatedError=!1)}},{key:"editItem",value:function(a){this.workerLoadId=a}},{key:"saveCurrentWorkerLoad",value:function(a){var b=this;this.Workerload.updateWorkerload({_id:this.workerLoadId,allocated:a.allocated}).then(function(){b.workerLoadId=null,b.$state.go("people")})["catch"](function(a){a=a.data,b.errors={},a.week&&angular.forEach(a.fields,function(c){form[c].$setValidity("mongoose",!1),b.errors[c]=a.message})})}},{key:"editWorkerItem",value:function(a){this.workerId=a}},{key:"saveCurrentWorker",value:function(a){var b=this;this.Worker.updateWorker({_id:this.workerId,firstname:a.firstname,DepartmentId:a.DepartmentId}).then(function(){b.workerId=null,b.Worker.getWorkers().then(function(a){b.workers=a}),b.$state.go("people")})["catch"](function(a){a=a.data,b.errors={},b.errors.other="Error: problem saving data to database",a.name,a.week&&angular.forEach(a.fields,function(c){form[c].$setValidity("mongoose",!1),b.errors[c]=a.message})})}},{key:"openLoadTime",value:function(a){var b=this;this.currentWorker=a,this.Workerload.getWorkerLoadTime(a._id).then(function(a){b.workerloads=a;var c=b.$uibModal.open({animation:!0,templateUrl:"app/people/modals/workerload.html",scope:b.$scope,size:"md"});b.cancel=function(){this.submitted=!1,this.submittedWorkerLoad=!1,c.dismiss("cancel")}})}}]),a}();angular.module("weeklytimesheetApp").component("people",{templateUrl:"app/people/people.html",controller:a})}(),angular.module("weeklytimesheetApp").config(["$stateProvider",function(a){a.state("people",{url:"/people",template:"<people></people>"})}]);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(){var a=function(){function a(b,c,d,e,f,g,h,i,j){_classCallCheck(this,a),this.Project=b,this.Worker=e,this.Client=c,this.$state=d,this.projects=[],this.projectstotal=[],this.allocations=[],this.currentProject={},this.projecthours=[],this.workers=[],this.Allocation=f,this.$uibModal=h,this.$scope=i,this.$rootScope=j,this.weekAllocatedError=!1,this.allocationId=null,this.projectId=null,this.notEnoughHoursError=null,this.Workerload=g,this.weeklyWorkloads=[],this.projectTotalViewActive=!1,this.clients=[]}return a.$inject=["Project","Client","$state","Worker","Allocation","Workerload","$uibModal","$scope","$rootScope"],_createClass(a,[{key:"$onInit",value:function(){var a=this;this.Project.getProjects().then(function(b){a.projects=b,a.Worker.getWorkers().then(function(b){a.workers=b})}),this.Client.getClients().then(function(b){a.clients=b})}},{key:"save",value:function(a){var b=this;this.submitted=!0,a.$valid&&this.Project.createProject({name:this.project.name}).then(function(){b.Project.getProjects().then(function(a){b.projects=a})})["catch"](function(c){c=c.data,b.errors={},c.name&&angular.forEach(c.fields,function(d){a[d].$setValidity("mongoose",!1),b.errors[d]=c.message})})}},{key:"openAllocateHours",value:function(a){var b=this;this.currentProject=a,this.Allocation.getProjectAllocation(a._id).then(function(a){b.projecthours=a;var c=b.$uibModal.open({animation:!0,templateUrl:"app/project/modals/projecthours.html",scope:b.$scope,size:"md"});b.cancel=function(){this.submittedAllocation=!1,c.dismiss()}})}},{key:"isWeekPersonUsed",value:function(a,b,c){return this.$rootScope.checkWeekPersonRelationship(a,b,c)?(this.weekAllocatedError=!0,!0):void(this.weekAllocatedError=!1)}},{key:"saveCurrentProject",value:function(a){var b=this;this.Project.updateProject({_id:this.projectId,name:a.name,ClientId:a.ClientId}).then(function(){b.projectId=null,b.Project.getProjects().then(function(a){b.projects=a}),b.$state.go("project")})["catch"](function(a){a=a.data,b.errors={},a.week&&angular.forEach(a.fields,function(c){form[c].$setValidity("mongoose",!1),b.errors[c]=a.message})})}},{key:"editItem",value:function(a){this.allocationId=a}},{key:"editProjectItem",value:function(a){this.projectId=a}},{key:"switchViews",value:function(){this.projectTotalViewActive=!this.projectTotalViewActive}},{key:"saveCurrentAllocation",value:function(a){var b=this;this.Allocation.updateAllocation({_id:this.allocationId,allocated:a.allocated}).then(function(){b.allocationId=null,b.$state.go("project")})["catch"](function(a){a=a.data,b.errors={},a.week&&angular.forEach(a.fields,function(c){form[c].$setValidity("mongoose",!1),b.errors[c]=a.message})})}},{key:"saveAllocation",value:function(a){var b=this;this.submittedAllocation=!0,this.isWeekPersonUsed(this.projecthours,this.projecthours.week,this.projecthours.workerid),a.$valid&&!this.weekAllocatedError&&this.Workerload.getWorkerLoadByWeek(this.projecthours.workerid,this.projecthours.week).then(function(c){b.weeklyWorkloads=c,b.weeklyWorkloads.length>0?b.Allocation.createAllocation({weekenum:b.projecthours.week,allocated:b.projecthours.hours,WorkerId:b.projecthours.workerid,ProjectId:b.currentProject._id}).then(function(){b.submittedAllocation=!1,b.Allocation.getProjectAllocation(b.currentProject._id).then(function(a){b.projecthours=a,b.notEnoughHoursError=null})})["catch"](function(c){c=c.data,b.errors={},c.week&&angular.forEach(c.fields,function(d){a[d].$setValidity("mongoose",!1),b.errors[d]=c.message})}):b.notEnoughHoursError="Warning. Cannot add hours. Please go to People screen to add load hours first for this week."})}}]),a}();angular.module("weeklytimesheetApp").component("project",{templateUrl:"app/project/project.html",controller:a})}(),angular.module("weeklytimesheetApp").config(["$stateProvider",function(a){a.state("project",{url:"/project",template:"<project></project>"})}]);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),SettingsController=function(){function a(b){_classCallCheck(this,a),this.Auth=b}return a.$inject=["Auth"],_createClass(a,[{key:"changePassword",value:function(a){var b=this;this.submitted=!0,a.$valid&&this.Auth.changePassword(this.user.oldPassword,this.user.newPassword).then(function(){b.message="Password successfully changed."})["catch"](function(){a.password.$setValidity("mongoose",!1),b.errors.other="Incorrect password",b.message=""})}}]),a}();angular.module("weeklytimesheetApp").controller("SettingsController",SettingsController),function(){function a(a,b,c){var d=c.BASE_URL+"allocations/",e={getAllocations:function(){var c=b.defer(),e=d;return a.get(e).then(function(a){c.resolve(a.data)},function(a){c.reject(a)}),c.promise},getProjectAllocation:function(c){var e=d+"project/"+c,f=b.defer();return a.get(e).then(function(a){f.resolve(a.data)},function(a){f.reject(a)}),f.promise},getAllocationsById:function(c){var e=d+c,f=b.defer();return a.get(e).then(function(a){f.resolve(a.data)},function(a){f.reject(a)}),f.promise},deleteAllocationsById:function(c){var e=d+c,f=b.defer();return a["delete"](e).then(function(a){f.resolve(a.data)},function(a){f.reject(a)}),f.promise},createAllocation:function(c){var e=b.defer();return a.post(d,c).then(function(a){e.resolve(a.data)},function(a){e.reject(a)}),e.promise},updateAllocation:function(c){var e=d+c._id,f=b.defer();return a.put(e,c).then(function(a){f.resolve(a.data)},function(a){f.reject(a)}),f.promise}};return e}a.$inject=["$http","$q","Config"],angular.module("weeklytimesheetApp.allocation").factory("Allocation",a)}();var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),SignupController=function(){function a(b,c){_classCallCheck(this,a),this.Auth=b,this.$state=c}return a.$inject=["Auth","$state"],_createClass(a,[{key:"register",value:function(a){var b=this;this.submitted=!0,a.$valid&&this.Auth.createUser({name:this.user.name,email:this.user.email,password:this.user.password}).then(function(){b.$state.go("main")})["catch"](function(c){c=c.data,b.errors={},c.name&&angular.forEach(c.fields,function(d){a[d].$setValidity("mongoose",!1),b.errors[d]=c.message})})}}]),a}();angular.module("weeklytimesheetApp").controller("SignupController",SignupController),function(){function a(a,b,c,d,e,f,g){var h=f.safeCb,i={},j=e.userRoles||[];c.get("token")&&"/logout"!==a.path()&&(i=g.get());var k={login:function(a,e){var f=a.email,j=a.password;return b.post("/auth/local",{email:f,password:j}).then(function(a){return c.put("token",a.data.token),i=g.get(),i.$promise}).then(function(a){return h(e)(null,a),a})["catch"](function(a){return k.logout(),h(e)(a.data),d.reject(a.data)})},logout:function(){c.remove("token"),i={}},createUser:function(a,b){return g.save(a,function(d){return c.put("token",d.token),i=g.get(),h(b)(null,a)},function(a){return k.logout(),h(b)(a)}).$promise},changePassword:function(a,b,c){return g.changePassword({id:i._id},{oldPassword:a,newPassword:b},function(){return h(c)(null)},function(a){return h(c)(a)}).$promise},getCurrentUser:function(a){if(0===arguments.length)return i;var b=i.hasOwnProperty("$promise")?i.$promise:i;return d.when(b).then(function(b){return h(a)(b),b},function(){return h(a)({}),{}})},isLoggedIn:function(a){return 0===arguments.length?i.hasOwnProperty("role"):k.getCurrentUser(null).then(function(b){var c=b.hasOwnProperty("role");return h(a)(c),c})},hasRole:function l(a,b){var l=function(a,b){return j.indexOf(a)>=j.indexOf(b)};return arguments.length<2?l(i.role,a):k.getCurrentUser(null).then(function(c){var d=!!c.hasOwnProperty("role")&&l(c.role,a);return h(b)(d),d})},isAdmin:function(){return k.hasRole.apply(k,[].concat.apply(["admin"],arguments))},getToken:function(){return c.get("token")}};return k}a.$inject=["$location","$http","$cookies","$q","appConfig","Util","User"],angular.module("weeklytimesheetApp.auth").factory("Auth",a)}();var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),LoginController=function(){function a(b,c){_classCallCheck(this,a),this.user={},this.errors={},this.submitted=!1,this.Auth=b,this.$state=c}return a.$inject=["Auth","$state"],_createClass(a,[{key:"login",value:function(a){var b=this;this.submitted=!0,a.$valid&&this.Auth.login({email:this.user.email,password:this.user.password}).then(function(){b.$state.go("main")})["catch"](function(a){b.errors.other=a.message})}}]),a}();angular.module("weeklytimesheetApp").controller("LoginController",LoginController),function(){angular.module("weeklytimesheetApp.auth").run(["$rootScope","$state","Auth",function(a,b,c){a.$on("$stateChangeStart",function(a,d){d.authenticate&&("string"==typeof d.authenticate?c.hasRole(d.authenticate,_.noop).then(function(d){if(!d)return a.preventDefault(),c.isLoggedIn(_.noop).then(function(a){b.go(a?"main":"login")})}):c.isLoggedIn(_.noop).then(function(c){c||(a.preventDefault(),b.go("main"))}))})}])}(),function(){function a(a){return a("/api/users/:id/:controller",{id:"@_id"},{changePassword:{method:"PUT",params:{controller:"password"}},get:{method:"GET",params:{id:"me"}}})}a.$inject=["$resource"],angular.module("weeklytimesheetApp.auth").factory("User",a)}();var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(){var a=function(){function a(b){_classCallCheck(this,a),this.users=b.query()}return a.$inject=["User"],_createClass(a,[{key:"delete",value:function(a){a.$remove(),this.users.splice(this.users.indexOf(a),1)}}]),a}();angular.module("weeklytimesheetApp.admin").controller("AdminController",a)}(),function(){function a(a,b,c){var d=c.BASE_URL+"clients/",e={getClients:function(){var c=b.defer(),e=d;return a.get(e).then(function(a){c.resolve(a.data)},function(a){c.reject(a)}),c.promise},createClient:function(c){var e=b.defer();return a.post(d,c).then(function(a){e.resolve(a.data)},function(a){e.reject(a)}),e.promise},updateClient:function(c){var e=d+c._id,f=b.defer();return a.put(e,c).then(function(a){f.resolve(a.data)},function(a){f.reject(a)}),f.promise}};return e}a.$inject=["$http","$q","Config"],angular.module("weeklytimesheetApp.client").factory("Client",a)}(),angular.module("weeklytimesheetApp").config(["$stateProvider",function(a){a.state("login",{url:"/login",templateUrl:"app/account/login/login.html",controller:"LoginController",controllerAs:"vm"}).state("logout",{url:"/logout?referrer",referrer:"main",template:"",controller:["$state","Auth",function(a,b){var c=a.params.referrer||a.current.referrer||"main";b.logout(),a.go(c)}]}).state("signup",{url:"/signup",templateUrl:"app/account/signup/signup.html",controller:"SignupController",controllerAs:"vm"}).state("settings",{url:"/settings",templateUrl:"app/account/settings/settings.html",controller:"SettingsController",controllerAs:"vm",authenticate:!0})}]).run(["$rootScope",function(a){a.$on("$stateChangeStart",function(a,b,c,d){"logout"===b.name&&d&&d.name&&!d.authenticate&&(b.referrer=d.name)})}]),function(){function a(a,b,c){var d=c.BASE_URL+"departments/",e={getDepartments:function(){var c=b.defer(),e=d;return a.get(e).then(function(a){c.resolve(a.data)},function(a){c.reject(a)}),c.promise},createDepartment:function(c){var e=b.defer();return a.post(d,c).then(function(a){e.resolve(a.data)},function(a){e.reject(a)}),e.promise},updateDepartment:function(c){var e=d+c._id,f=b.defer();return a.put(e,c).then(function(a){f.resolve(a.data)},function(a){f.reject(a)}),f.promise}};return e}a.$inject=["$http","$q","Config"],angular.module("weeklytimesheetApp.department").factory("Department",a)}(),angular.module("weeklytimesheetApp").directive("footer",function(){return{templateUrl:"components/footer/footer.html",restrict:"E",link:function(a,b){b.addClass("footer")}}}),angular.module("weeklytimesheetApp.admin").config(["$stateProvider",function(a){a.state("admin",{url:"/admin",templateUrl:"app/admin/admin.html",controller:"AdminController",controllerAs:"admin",authenticate:"admin"})}]),function(){function a(a,b,c){var d=c.BASE_URL+"holidays/",e={getHolidays:function(){var c=b.defer(),e=d;return a.get(e).then(function(a){c.resolve(a.data)},function(a){c.reject(a)}),c.promise},createHoliday:function(c){var e=b.defer();return a.post(d,c).then(function(a){e.resolve(a.data)},function(a){e.reject(a)}),e.promise},updateHoliday:function(c){var e=d+c._id,f=b.defer();return a.put(e,c).then(function(a){f.resolve(a.data)},function(a){f.reject(a)}),f.promise}};return e}a.$inject=["$http","$q","Config"],angular.module("weeklytimesheetApp.holiday").factory("Holiday",a)}(),angular.module("weeklytimesheetApp").factory("Modal",["$rootScope","$uibModal",function(a,b){function c(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"modal-default",e=a.$new();return angular.extend(e,c),b.open({templateUrl:"components/modal/modal.html",windowClass:d,scope:e})}return{confirm:{"delete":function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:angular.noop;return function(){var b,d=Array.prototype.slice.call(arguments),e=d.shift();b=c({modal:{dismissable:!0,title:"Confirm Delete",html:"<p>Are you sure you want to delete <strong>"+e+"</strong> ?</p>",buttons:[{classes:"btn-danger",text:"Delete",click:function(a){b.close(a)}},{classes:"btn-default",text:"Cancel",click:function(a){b.dismiss(a)}}]}},"modal-danger"),b.result.then(function(b){a.apply(b,d)})}}}}}]),angular.module("weeklytimesheetApp").directive("mongooseError",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){b.on("keydown",function(){return d.$setValidity("mongoose",!0)})}}});var NavbarController=function a(b){_classCallCheck(this,a),this.isLoggedIn=b.isLoggedIn,this.isAdmin=b.isAdmin,this.getCurrentUser=b.getCurrentUser,this.menu=[{state:"project",title:"Projects"},{state:"people",title:"People"},{state:"department",title:"Departments"},{state:"client",title:"Clients"}]};NavbarController.$inject=["Auth"],angular.module("weeklytimesheetApp").controller("NavbarController",NavbarController),angular.module("weeklytimesheetApp").directive("navbar",function(){return{templateUrl:"components/navbar/navbar.html",restrict:"E",controller:"NavbarController",controllerAs:"nav"}}),angular.module("weeklytimesheetApp").controller("OauthButtonsCtrl",["$window",function(a){this.loginOauth=function(b){a.location.href="/auth/"+b}}]),angular.module("weeklytimesheetApp").directive("oauthButtons",function(){return{templateUrl:"components/oauth-buttons/oauth-buttons.html",restrict:"EA",controller:"OauthButtonsCtrl",controllerAs:"OauthButtons",scope:{classes:"@"}}}),function(a,b){a.module("weeklytimesheetApp.constants",[]).constant("appConfig",{userRoles:["guest","user","admin"]})}(angular),function(){function a(a,b,c){var d=c.BASE_URL+"workers/",e={getWorkers:function(){var c=b.defer(),e=d;return a.get(e).then(function(a){c.resolve(a.data)},function(a){c.reject(a)}),c.promise},getWorkersById:function(c){var e=d+c,f=b.defer();return a.get(e).then(function(a){f.resolve(a.data)},function(a){f.reject(a)}),f.promise},deleteWorkerById:function(c){var e=d+c,f=b.defer();return a["delete"](e).then(function(a){f.resolve(a.data)},function(a){f.reject(a)}),f.promise},createWorker:function(c){var e=b.defer();return a.post(d,c).then(function(a){e.resolve(a.data)},function(a){e.reject(a)}),e.promise},updateWorker:function(c){console.log("worker data:",c);var e=d+c._id,f=b.defer();return a.put(e,c).then(function(a){f.resolve(a.data)},function(a){f.reject(a)}),f.promise}};return e}a.$inject=["$http","$q","Config"],angular.module("weeklytimesheetApp.worker").factory("Worker",a);
}();var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(){var a=function(){function a(b,c,d,e,f){_classCallCheck(this,a),this.Client=b,this.clients=[],this.$uibModal=c,this.$state=f,this.clientId=null,this.moment=moment,this.clients=[]}return a.$inject=["Client","$uibModal","$scope","$rootScope","$state"],_createClass(a,[{key:"$onInit",value:function(){var a=this;this.Client.getClients().then(function(b){a.clients=b}),this.Client.getClients().then(function(b){a.clients=b})}},{key:"save",value:function(a){var b=this;this.submitted=!0,a.$valid&&this.Client.createClient({name:this.client.name}).then(function(a){b.Client.getClients().then(function(a){b.clients=a})})["catch"](function(c){c=c.data,b.errors={},c.name&&angular.forEach(c.fields,function(d){a[d].$setValidity("mongoose",!1),b.errors[d]=c.message})})}},{key:"editClientItem",value:function(a){this.clientId=a}},{key:"saveCurrentClient",value:function(a){var b=this;this.Client.updateClient({_id:this.clientId,name:a.name}).then(function(){b.clientId=null,b.$state.go("client")})["catch"](function(a){a=a.data,b.errors={},a.week&&angular.forEach(a.fields,function(c){form[c].$setValidity("mongoose",!1),b.errors[c]=a.message})})}}]),a}();angular.module("weeklytimesheetApp").component("client",{templateUrl:"app/client/client.html",controller:a})}(),function(){function a(a,b,c){var d=c.BASE_URL+"allocations/",e=c.BASE_URL+"projects/",f={getProjects:function(){var c=b.defer(),d=e;return a.get(d).then(function(a){c.resolve(a.data)},function(a){c.reject(a)}),c.promise},getProjectsTotal:function(){var c=b.defer(),d=e+"total/projects";return a.get(d).then(function(a){c.resolve(a.data)},function(a){c.reject(a)}),c.promise},getProjectsTotalByWorker:function(){var c=b.defer(),d=e+"worker/projects";return a.get(d).then(function(a){c.resolve(a.data)},function(a){c.reject(a)}),c.promise},getWeeklyProjects:function(c,e){var f=d+"weekly/allocation?weekenum="+c+"&workerid="+e,g=b.defer();return a.get(f).then(function(a){g.resolve(a.data)},function(a){g.reject(a)}),g.promise},getProjectsById:function(c){var d=e+c,f=b.defer();return a.get(d).then(function(a){f.resolve(a.data)},function(a){f.reject(a)}),f.promise},deleteProjectById:function(c){var d=e+c,f=b.defer();return a["delete"](d).then(function(a){f.resolve(a.data)},function(a){f.reject(a)}),f.promise},createProject:function(c){var d=b.defer();return a.post(e,c).then(function(a){d.resolve(a.data)},function(a){d.reject(a)}),d.promise},updateProject:function(c){var d=e+c._id,f=b.defer();return a.put(d,c).then(function(a){f.resolve(a.data)},function(a){f.reject(a)}),f.promise}};return f}a.$inject=["$http","$q","Config"],angular.module("weeklytimesheetApp.project").factory("Project",a)}(),angular.module("weeklytimesheetApp").config(["$stateProvider",function(a){a.state("client",{url:"/client",template:"<client></client>"})}]),function(){function a(a){var b={safeCb:function(a){return angular.isFunction(a)?a:angular.noop},urlParse:function(a){var b=document.createElement("a");return b.href=a,""===b.host&&(b.href=b.href),b},isSameOrigin:function(c,d){return c=b.urlParse(c),d=d&&[].concat(d)||[],d=d.map(b.urlParse),d.push(a.location),d=d.filter(function(a){var b=c.hostname===a.hostname,d=c.protocol===a.protocol,e=c.port===a.port||""===a.port&&("80"===c.port||"443"===c.port);return b&&d&&e}),d.length>=1}};return b}a.$inject=["$window"],angular.module("weeklytimesheetApp.util").factory("Util",a)}();var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(){var a=function(){function a(b,c,d,e,f,g){_classCallCheck(this,a),this.Department=b,this.Client=c,this.departments=[],this.$uibModal=d,this.$state=g,this.departmentId=null,this.moment=moment,this.clients=[]}return a.$inject=["Department","Client","$uibModal","$scope","$rootScope","$state"],_createClass(a,[{key:"$onInit",value:function(){var a=this;this.Department.getDepartments().then(function(b){a.departments=b}),this.Client.getClients().then(function(b){a.clients=b})}},{key:"save",value:function(a){var b=this;this.submitted=!0,a.$valid&&this.Department.createDepartment({name:this.department.name}).then(function(a){b.Department.getDepartments().then(function(a){b.departments=a})})["catch"](function(c){c=c.data,b.errors={},c.name&&angular.forEach(c.fields,function(d){a[d].$setValidity("mongoose",!1),b.errors[d]=c.message})})}},{key:"editDepartmentItem",value:function(a){this.departmentId=a}},{key:"saveCurrentDepartment",value:function(a){var b=this;this.Department.updateDepartment({_id:this.departmentId,name:a.name}).then(function(){b.departmentId=null,b.$state.go("department")})["catch"](function(a){a=a.data,b.errors={},a.week&&angular.forEach(a.fields,function(c){form[c].$setValidity("mongoose",!1),b.errors[c]=a.message})})}}]),a}();angular.module("weeklytimesheetApp").component("department",{templateUrl:"app/department/department.html",controller:a})}(),function(){function a(a,b,c){var d=c.BASE_URL+"workerloads/",e={getWorkerloads:function(){var c=b.defer(),e=d;return a.get(e).then(function(a){c.resolve(a.data)},function(a){c.reject(a)}),c.promise},getWorkerLoadTime:function(c){var e=d+"worker/"+c,f=b.defer();return a.get(e).then(function(a){f.resolve(a.data)},function(a){f.reject(a)}),f.promise},getWorkerLoadByWeek:function(c,e){var f=d+"worker/week/allocation?weekenum="+e+"&workerid="+c,g=b.defer();return a.get(f).then(function(a){g.resolve(a.data)},function(a){g.reject(a)}),g.promise},getWorkerloadById:function(c){var e=d+c,f=b.defer();return a.get(e).then(function(a){f.resolve(a.data)},function(a){f.reject(a)}),f.promise},deleteWorkerloadById:function(c){var e=d+c,f=b.defer();return a["delete"](e).then(function(a){f.resolve(a.data)},function(a){f.reject(a)}),f.promise},createWorkerload:function(c){var e=b.defer();return a.post(d,c).then(function(a){e.resolve(a.data)},function(a){e.reject(a)}),e.promise},updateWorkerload:function(c){var e=d+c._id,f=b.defer();return a.put(e,c).then(function(a){f.resolve(a.data)},function(a){f.reject(a)}),f.promise}};return e}a.$inject=["$http","$q","Config"],angular.module("weeklytimesheetApp.workerload").factory("Workerload",a)}(),angular.module("weeklytimesheetApp").run(["$templateCache",function(a){a.put("app/account/login/login.html",'<div class=container><div class=row><div class=col-sm-12><h1>Login</h1><p>Accounts are reset on server restart from <code>server/config/seed.js</code>. Default account is <code>test@example.com</code> / <code>test</code></p><p>Admin account is <code>admin@example.com</code> / <code>admin</code></p></div><div class=col-sm-12><form class=form name=form ng-submit=vm.login(form) novalidate><div class=form-group><label>Email</label><input type=email name=email class=form-control ng-model=vm.user.email required></div><div class=form-group><label>Password</label><input type=password name=password class=form-control ng-model=vm.user.password required></div><div class="form-group has-error"><p class=help-block ng-show="form.email.$error.required && form.password.$error.required && vm.submitted">Please enter your email and password.</p><p class=help-block ng-show="form.email.$error.email && vm.submitted">Please enter a valid email.</p><p class=help-block>{{ vm.errors.other }}</p></div><div><button class="btn btn-inverse btn-lg btn-login" type=submit>Login</button> <a class="btn btn-default btn-lg btn-register" ui-sref=signup>Register</a></div><hr><div class=row><div class="col-sm-4 col-md-3"><oauth-buttons classes=btn-block></oauth-buttons></div></div></form></div></div><hr></div>'),a.put("app/account/settings/settings.html",'<div class=container><div class=row><div class=col-sm-12><h1>Change Password</h1></div><div class=col-sm-12><form class=form name=form ng-submit=vm.changePassword(form) novalidate><div class=form-group><label>Current Password</label><input type=password name=password class=form-control ng-model=vm.user.oldPassword mongoose-error><p class=help-block ng-show=form.password.$error.mongoose>{{ vm.errors.other }}</p></div><div class=form-group><label>New Password</label><input type=password name=newPassword class=form-control ng-model=vm.user.newPassword ng-minlength=3 required><p class=help-block ng-show="(form.newPassword.$error.minlength || form.newPassword.$error.required) && (form.newPassword.$dirty || vm.submitted)">Password must be at least 3 characters.</p></div><div class=form-group><label>Confirm New Password</label><input type=password name=confirmPassword class=form-control ng-model=vm.user.confirmPassword match=vm.user.newPassword ng-minlength=3 required><p class=help-block ng-show="form.confirmPassword.$error.match && vm.submitted">Passwords must match.</p></div><p class=help-block>{{ vm.message }}</p><button class="btn btn-lg btn-primary" type=submit>Save changes</button></form></div></div></div>'),a.put("app/account/signup/signup.html",'<div class=container><div class=row><div class=col-sm-12><h1>Sign up</h1></div><div class=col-sm-12><form class=form name=form ng-submit=vm.register(form) novalidate><div class=form-group ng-class="{ \'has-success\': form.name.$valid && vm.submitted,\n                                            \'has-error\': form.name.$invalid && vm.submitted }"><label>Name</label><input name=name class=form-control ng-model=vm.user.name required><p class=help-block ng-show="form.name.$error.required && vm.submitted">A name is required</p></div><div class=form-group ng-class="{ \'has-success\': form.email.$valid && vm.submitted,\n                                            \'has-error\': form.email.$invalid && vm.submitted }"><label>Email</label><input type=email name=email class=form-control ng-model=vm.user.email required mongoose-error><p class=help-block ng-show="form.email.$error.email && vm.submitted">Doesn\'t look like a valid email.</p><p class=help-block ng-show="form.email.$error.required && vm.submitted">What\'s your email address?</p><p class=help-block ng-show=form.email.$error.mongoose>{{ vm.errors.email }}</p></div><div class=form-group ng-class="{ \'has-success\': form.password.$valid && vm.submitted,\n                                            \'has-error\': form.password.$invalid && vm.submitted }"><label>Password</label><input type=password name=password class=form-control ng-model=vm.user.password ng-minlength=3 required mongoose-error><p class=help-block ng-show="(form.password.$error.minlength || form.password.$error.required) && vm.submitted">Password must be at least 3 characters.</p><p class=help-block ng-show=form.password.$error.mongoose>{{ vm.errors.password }}</p></div><div class=form-group ng-class="{ \'has-success\': form.confirmPassword.$valid && vm.submitted,\n                                            \'has-error\': form.confirmPassword.$invalid && vm.submitted }"><label>Confirm Password</label><input type=password name=confirmPassword class=form-control ng-model=vm.user.confirmPassword match=vm.user.password ng-minlength=3 required><p class=help-block ng-show="form.confirmPassword.$error.match && vm.submitted">Passwords must match.</p></div><div><button class="btn btn-inverse btn-lg btn-register" type=submit>Sign up</button> <a class="btn btn-default btn-lg btn-login" ui-sref=login>Login</a></div><hr><div class=row><div class="col-sm-4 col-md-3"><oauth-buttons classes=btn-block></oauth-buttons></div></div></form></div></div><hr></div>'),a.put("app/admin/admin.html",'<div class=container><p>The delete user and user index api routes are restricted to users with the \'admin\' role.</p><ul class="list-group user-list"><li class=list-group-item ng-repeat="user in admin.users"><div class=user-info><strong>{{user.name}}</strong><br><span class=text-muted>{{user.email}}</span></div><a ng-click=admin.delete(user) class=trash><span class="fa fa-trash fa-2x"></span></a></li></ul></div>'),a.put("app/client/client.html",'<div class=container><div class=row><div class=col-sm-12><h1>Clients</h1></div><div class=col-sm-6><form class=form name=form ng-submit=$ctrl.save(form) novalidate><div class=form-group ng-class="{ \'has-success\': form.name.$valid && $ctrl.submitted,\n                                            \'has-error\': form.name.$invalid && $ctrl.submitted }"><label>Name</label><input name=client class=form-control ng-model=$ctrl.client.name required><p class=help-block ng-show="form.name.$error.required && $ctrl.submitted">Name is required</p></div><div><button class="btn btn-inverse btn-lg btn-register" type=submit>Save</button></div></form></div></div><hr><div class=row ng-if="$ctrl.clients.length > 0"><div class=col-sm-8><p class=lead><small>Double-click on the name to edit</small></p><table class=table><thead><tr><th>Name</th><th>Created</th></tr></thead><tbody><tr ng-repeat="client in $ctrl.clients"><td><span ng-show="client._id != $ctrl.clientId" ng-dblclick=$ctrl.editClientItem(client._id)>{{client.name}}</span> <input ng-show="client._id === $ctrl.clientId" ng-model=client.name autofocus></td><td>{{client.createdAt | date:\'medium\'}}</td><td ng-show="client._id === $ctrl.clientId"><button class="btn btn-primary btn-sm" ng-click=$ctrl.saveCurrentClient(client)>Save</button></td></tr></tbody></table></div></div></div>'),a.put("app/department/department.html",'<div class=container><div class=row><div class=col-sm-12><h1>Departments</h1></div><div class=col-sm-6><form class=form name=form ng-submit=$ctrl.save(form) novalidate><div class=form-group ng-class="{ \'has-success\': form.name.$valid && $ctrl.submitted,\n                                            \'has-error\': form.name.$invalid && $ctrl.submitted }"><label>Name</label><input name=department class=form-control ng-model=$ctrl.department.name required><p class=help-block ng-show="form.name.$error.required && $ctrl.submitted">Name is required</p></div><div><button class="btn btn-inverse btn-lg btn-register" type=submit>Save</button></div></form></div></div><hr><div class=row ng-if="$ctrl.departments.length > 0"><div class=col-sm-8><p class=lead><small>Double-click on the name to edit</small></p><table class=table><thead><tr><th>Name</th><th>Created</th></tr></thead><tbody><tr ng-repeat="department in $ctrl.departments"><td><span ng-show="department._id != $ctrl.departmentId" ng-dblclick=$ctrl.editDepartmentItem(department._id)>{{department.name}}</span> <input ng-show="department._id === $ctrl.departmentId" ng-model=department.name autofocus></td><td>{{department.createdAt | date:\'medium\'}}</td><td ng-show="department._id === $ctrl.departmentId"><button class="btn btn-primary btn-sm" ng-click=$ctrl.saveCurrentDepartment(department)>Save</button></td></tr></tbody></table></div></div></div>'),a.put("app/holiday/holiday.html",'<div class=container><div class=row><div class=col-sm-12><h1>Holidays</h1></div><div class=col-sm-6><form class=form name=form ng-submit=$ctrl.save(form) novalidate><div class=form-group ng-class="{ \'has-success\': form.name.$valid && $ctrl.submitted,\n                                            \'has-error\': form.name.$invalid && $ctrl.submitted }"><label>Holiday name</label><input name=name class=form-control ng-model=$ctrl.holiday.name required><p class=help-block ng-show="form.name.$error.required && $ctrl.submitted">A holiday is required</p></div><div class=form-group ng-class="{ \'has-success\': form.dt.$valid && $ctrl.submitted,\n                                            \'has-error\': form.dt.$invalid && $ctrl.submitted }"><label>Holiday date</label><p class=input-group><input class=form-control uib-datepicker-popup=yyyy-MM-dd ng-model=$ctrl.dt is-open=$ctrl.openedDate datepicker-options=dateOptions ng-required=true close-text=Close> <span class=input-group-btn><button class="btn btn-default" ng-click=$ctrl.openDate($event)><i class="glyphicon glyphicon-calendar"></i></button></span></p></div><div><button class="btn btn-inverse btn-lg btn-register" type=submit>Save</button></div></form></div></div><hr><div class=row ng-if="$ctrl.workers.length > 0"><div class=col-sm-8><p class=lead><small>Double-click on the first name or department to edit</small></p><p class="help-block has-error">{{ $ctrl.errors.other }}</p><table class=table><thead><tr><th>First name</th><th>Department</th><th>Created</th></tr></thead><tbody><tr ng-repeat="worker in $ctrl.workers"><td><span ng-show="worker._id != $ctrl.workerId" ng-dblclick=$ctrl.editWorkerItem(worker._id)>{{worker.firstname}}</span> <input ng-show="worker._id === $ctrl.workerId" ng-model=worker.firstname autofocus></td><td><span ng-show="worker._id != $ctrl.workerId" ng-dblclick=$ctrl.editWorkerItem(worker._id)>{{worker.Department.name}}</span><!-- <input ng-show="worker._id === $ctrl.workerId" ng-model="worker.DepartmentId" autofocus /> --><select ng-show="worker._id === $ctrl.workerId" class=form-control ng-model=worker.DepartmentId name=department ng-options="department._id as department.name for department in $ctrl.departments" required></select></td><td>{{worker.createdAt | date:\'medium\'}}</td><td ng-click=$ctrl.openLoadTime(worker)><a href=#>Manage Load Time</a></td><td ng-show="worker._id === $ctrl.workerId"><button class="btn btn-primary btn-sm" ng-click=$ctrl.saveCurrentWorker(worker)>Save</button></td></tr></tbody></table></div></div></div>'),a.put("app/main/main.html",'<header><div id=exTab2 class=container><div class=row><ul class="nav nav-tabs"><li data-ng-class="{\'active\' : $ctrl.studioViewActive}" ng-click="$ctrl.changeView(\'studio\')"><a href=#1 data-toggle=tab>Studio View</a></li><li data-ng-class="{\'active\' : $ctrl.projectViewActive}" ng-click="$ctrl.changeView(\'project\')"><a href=#2 data-toggle=tab>Project View</a></li></ul><div class=row></div></div></div></header><div class=container><p class=lead>{{$ctrl.Informational}}</p><div class=row><table class=table-bordered><tr class=column-label><td></td><td></td><td ng-repeat="wDate in $ctrl.weeklyDates"><div class=row-date-label>{{wDate | date:\'dd\'}}-{{wDate | date:\'MMM\'}}</div></td></tr><tr class=column-label><td></td><td></td><td ng-repeat="(key, value) in $ctrl.groupedByWeek">W{{key}}</td></tr><tbody ng-repeat="(key, valueName) in $ctrl.groupedByNameAndDepartment" ng-init="nameIndex = key" ng-show=$ctrl.studioViewActive><tr><td class=row-label><input type=checkbox ng-click="$ctrl.selectStudioDepartments($event, nameIndex)" ng-model=selected[nameIndex] ng-class={open:selected[nameIndex]}>{{key}}</td><td></td><td ng-repeat="(key, value) in $ctrl.groupedByWeek" ng-init="weekIndex = key"></td></tr><tr ng-show=$ctrl.selectedStudioDepartments[nameIndex] ng-repeat-end ng-repeat="(keyName, valueKeyName) in valueName" ng-init="nameKeyIndex = keyName" ng-show=$ctrl.studioViewActive><td class=row-label-dept>{{keyName}}</td><td></td><td ng-repeat="(keyName2, value) in $ctrl.groupedByWeek" ng-init="weekIndex = keyName2"><span ng-bind="$ctrl.compute(nameKeyIndex , weekIndex)"></span><div ng-if="$ctrl.allocationTotal > $ctrl.maxLoadTotal"><div class=danger ng-click="$ctrl.openAllocatedHoursModal(weekIndex, valueKeyName[0].WorkerId)"><div ng-bind=$ctrl.allocationTotal></div></div></div><div ng-if="$ctrl.allocationTotal <= $ctrl.maxLoadTotal"><div class=output><div ng-bind=$ctrl.allocationTotal></div></div></div></td></tr></tbody><tbody ng-repeat="client in $ctrl.groupedByClientAndProjectAndWorker" ng-init="nameClientIndex = client.client" ng-show=$ctrl.projectViewActive><tr><td class=row-label><input type=checkbox ng-click="$ctrl.selectClientRoot($event, client.client)" ng-model=selected[$id] ng-class={open:selected[$id]}>{{client.client}}</td><td></td><td ng-repeat="(key, value) in $ctrl.groupedByWeek" ng-init="weekIndex = key"></td></tr><tr ng-show=$ctrl.selectedClientRoot[client.client] ng-repeat-start="project in client.children"><td class=row-label-project><input type=checkbox ng-click="$ctrl.selectProjectRoot($event, project.project)" ng-model=selected[project.project] ng-class={open:selected[project.project]}>{{project.project}}</td><td></td><td ng-repeat="(key, value) in $ctrl.groupedByWeek" ng-init="weekIndex = key"></td></tr><tr ng-show="$ctrl.selectedProjectRoot[project.project] && $ctrl.selectedClientRoot[client.client]" ng-repeat-start="(key, valueChildren) in project.children" ng-init="nameDeptIndex = $id"><td class=row-label-top><input type=checkbox ng-click="$ctrl.selectProjectDepartments($event, $id, valueChildren)" ng-model=selected[$id] ng-class={open:selected[$id]}>{{key}}</td><td></td><td ng-repeat="(key, value) in $ctrl.groupedByWeek" ng-init="weekIndex = key"></td></tr><tr ng-show="$ctrl.selectedProjectDepartments[nameDeptIndex] && $ctrl.selectedProjectRoot[project.project] && $ctrl.selectedClientRoot[client.client]" ng-repeat="(key, valueNames) in valueChildren"><td class=row-label-dept>{{key}}</td><td></td><td ng-repeat-end ng-repeat="(key1, value) in $ctrl.groupedByWeek" ng-init="weekIndex = key"><span ng-bind="$ctrl.computeProjectWorker(key1, valueNames)"></span><div ng-if="$ctrl.projectTotal > $ctrl.projectTotalAllocated"><div class=danger ng-click="$ctrl.openAllocatedHoursModal(value[0].Week,valueNames[0].WorkerId )"><div ng-bind=$ctrl.projectTotal></div></div></div><div ng-if="$ctrl.projectTotal <= $ctrl.projectTotalAllocated"><div class=output><div ng-bind=$ctrl.projectTotal></div></div></div></td></tr><tr ng-repeat-end ng-hide=true></tr><tr ng-repeat-end ng-hide=true></tr></tbody><!--  <tbody ng-repeat="projectWorker in $ctrl.groupedByProjectAndWorker" ng-init="nameProjectIndex = projectWorker.project" ng-show="$ctrl.projectViewActive">\n\n    <tr><td class="row-label"><span ng-hide="true" ng-bind="$ctrl.findClientName(nameProjectIndex)"></span><input type=checkbox ng-click="$ctrl.selectClientRoot($event, $ctrl.currentClient)" ng-model="selected[$id]" ng-class=\'{open:selected[$id]}\'></input>{{$ctrl.currentClient}}</td>\n    <td></td>\n      <td ng-repeat="(key, value) in $ctrl.groupedByWeek" ng-init="weekIndex = key">\n       </td>    \n    </tr>  \n\n    <tr ng-show="$ctrl.selectedClientRoot[$ctrl.currentClient]">\n      <td class="row-label-project"><input type=checkbox ng-click="$ctrl.selectProjectRoot($event, nameProjectIndex)" ng-model="selected[nameProjectIndex]" ng-class=\'{open:selected[nameProjectIndex]}\'></input>{{projectWorker.project}}</td>\n      <td></td>\n      <td ng-repeat="(key, value) in $ctrl.groupedByWeek" ng-init="weekIndex = key">\n       </td>        \n    </tr>  \n    \n     <tr ng-show="$ctrl.selectedProjectRoot[nameProjectIndex] && $ctrl.selectedClientRoot[$ctrl.currentClient]" ng-repeat-start="(key, valueChildren) in projectWorker.children" ng-init="nameDeptIndex = $id" ng-show="$ctrl.projectViewActive">\n      <td class="row-label-top"><input type=checkbox ng-click="$ctrl.selectProjectDepartments($event, $id)" ng-model="selected[$id]" ng-class=\'{open:selected[$id]}\'></input>{{key}}</td>\n      <td></td>\n      <td ng-repeat="(key, value) in $ctrl.groupedByWeek" ng-init="weekIndex = key">\n       </td> \n     </tr>\n      <tr ng-show="$ctrl.selectedProjectDepartments[nameDeptIndex] && $ctrl.selectedProjectRoot[nameProjectIndex] && $ctrl.selectedClientRoot[$ctrl.currentClient]" ng-repeat-end ng-repeat="(key, valueNames) in valueChildren">\n      <td class="row-label-dept">{{key}}</td>\n      <td></td>\n     <td ng-repeat-end ng-repeat="(key1, value) in $ctrl.groupedByWeek" ng-init="weekIndex = key">\n             <span ng-bind="$ctrl.computeProjectWorker(key1, valueNames)"></span>\n              <div ng-if="$ctrl.projectTotal > $ctrl.projectTotalAllocated">\n               <div class="danger" ng-click="$ctrl.openAllocatedHoursModal(value[0].Week,valueNames[0].WorkerId )">\n                    <div ng-bind="$ctrl.projectTotal"> </div>\n                 </div>\n              </div>\n              <div ng-if="$ctrl.projectTotal <= $ctrl.projectTotalAllocated">\n                  <div class="output">\n                   <div ng-bind="$ctrl.projectTotal"> </div>\n                 </div>\n             </div>\n      </td>\n     </tr>\n     \n  </tbody> --></table></div></div>'),a.put("app/main/modals/project.html",'<div class=container><header><p class=lead>Update weekly hours</p></header><div class=row><div class=col-sm-6 ng-if="$ctrl.weeklyProjects.length > 0"><table class=table><thead><tr class=row-label-header><th>Week</th><th>Allocated</th><th></th></tr></thead><tbody><tr ng-repeat="weeklyAllocation in $ctrl.weeklyProjects"><td>{{weeklyAllocation.weekenum}}</td><td><input class=red-label type=number pattern=\\d+ ng-min=1 ng-max=80 ng-model=weeklyAllocation.allocated value=weeklyAllocation.allocated autofocus></td><td><button class="btn btn-primary btn-sm" ng-click=$ctrl.saveCurrentAllocation(weeklyAllocation)>Save</button></td></tr></tbody></table><div></div></div><div class=col-sm-6 ng-if="$ctrl.weeklyProjects.length === 0">No weekly data</div></div><div class=row><div class=col-sm-6><div class=modal-footer><button class="btn btn-warning" type=button ng-click=$ctrl.cancel()>Cancel</button></div></div></div></div>'),a.put("app/people/modals/workerload.html",'<div class=container><header><p class=lead>Manage worker load hours - {{$ctrl.currentWorker.firstname}}</p></header><div class=row><div class=col-sm-6><form class=form name=form ng-submit=$ctrl.saveWorkerload(form) novalidate><div class=form-group ng-class="{ \'has-success\': form.week.$valid && $ctrl.submittedWorkerLoad,\n                                            \'has-error\': form.week.$invalid && $ctrl.submittedWorkerLoad  || $ctrl.weekAllocatedError}"><label>Week(1-52)</label><input type=number name=week type=number pattern=\\d+ ng-min=1 ng-max=52 class=form-control ng-model=$ctrl.workerload.week required><p class=help-block ng-show="form.week.$error.required && $ctrl.submittedWorkerLoad">A week is required</p><p class=help-block ng-show="form.week.$error.pattern && $ctrl.submittedWorkerLoad">The number is not valid (range 1 - 80)</p><p class=help-block ng-show="form.week.$error.max && $ctrl.submittedWorkerLoad">The number is not valid (range 1 - 80)</p><p class=help-block ng-show="$ctrl.weekAllocatedError  && $ctrl.submittedWorkerLoad">This week has been already assigned to this user. Double-click on the allocated hours below to edit.</p></div><div class=form-group ng-class="{ \'has-success\': form.hours.$valid && $ctrl.submittedWorkerLoad,\n                                            \'has-error\': form.hours.$invalid && $ctrl.submittedWorkerLoad }"><label>Hours</label><input type=number name=hours pattern=\\d+ class=form-control ng-min=1 ng-max=80 ng-model=$ctrl.workerload.hours required><p class=help-block ng-show="form.hours.$error.required && $ctrl.submittedWorkerLoad">Hours is required</p><p class=help-block ng-show="form.hours.$error.pattern && $ctrl.submittedWorkerLoad">The number is not valid (range 1 - 80)</p><p class=help-block ng-show="form.hours.$error.max && $ctrl.submittedWorkerLoad">The number is not valid (range 1 - 80)</p></div><div><button class="btn btn-primary" type=submit>Add</button></div></form></div></div><hr><div class=row ng-if="$ctrl.workerloads.length > 0"><div class=col-sm-6><p class=lead><small>Double-click on the allocated hours below to edit.</small></p><table class=table><thead><tr class=row-label-header><th>First name</th><th>Week</th><th>Allocated hours</th><th></th></tr></thead><tbody><tr ng-repeat="workerload in $ctrl.workerloads"><td>{{$ctrl.currentWorker.firstname}}</td><td>{{workerload.weekenum}}</td><td><span ng-show="workerload._id != $ctrl.workerLoadId" ng-dblclick=$ctrl.editItem(workerload._id)>{{workerload.allocated}}</span> <input ng-show="workerload._id === $ctrl.workerLoadId" ng-model=workerload.allocated autofocus></td><td ng-show="workerload._id === $ctrl.workerLoadId"><button class="btn btn-primary btn-sm" ng-click=$ctrl.saveCurrentWorkerLoad(workerload)>Save</button></td></tr></tbody></table></div></div><div class=row><div class=col-sm-6><div class=modal-footer><button class="btn btn-warning" type=button ng-click=$ctrl.cancel()>Cancel</button></div></div></div></div>'),a.put("app/people/people.html",'<div class=container><div class=row><div class=col-sm-12><h1>Workers</h1></div><div class=col-sm-6><form class=form name=form ng-submit=$ctrl.save(form) novalidate><div class=form-group ng-class="{ \'has-success\': form.name.$valid && $ctrl.submitted,\n                                            \'has-error\': form.name.$invalid && $ctrl.submitted }"><label>First name</label><input name=name class=form-control ng-model=$ctrl.worker.firstname required><p class=help-block ng-show="form.name.$error.required && $ctrl.submitted">A first name is required</p></div><div class=form-group ng-class="{ \'has-success\': form.department.$valid && $ctrl.submitted,\n                                            \'has-error\': form.department.$invalid && $ctrl.submitted }"><label>Department</label><select class=form-control ng-model=$ctrl.worker.departmentid name=department ng-options="department._id as department.name for department in $ctrl.departments" required><option value="">Select a department</option></select><p class=help-block ng-show="form.department.$error.required && $ctrl.submitted">A department is required</p></div><div><button class="btn btn-inverse btn-lg btn-register" type=submit>Save</button></div></form></div></div><hr><div class=row ng-if="$ctrl.workers.length > 0"><div class=col-sm-8><p class=lead><small>Double-click on the first name or department to edit</small></p><p class="help-block has-error">{{ $ctrl.errors.other }}</p><table class=table><thead><tr><th>First name</th><th>Department</th><th>Created</th></tr></thead><tbody><tr ng-repeat="worker in $ctrl.workers"><td><span ng-show="worker._id != $ctrl.workerId" ng-dblclick=$ctrl.editWorkerItem(worker._id)>{{worker.firstname}}</span> <input ng-show="worker._id === $ctrl.workerId" ng-model=worker.firstname autofocus></td><td><span ng-show="worker._id != $ctrl.workerId" ng-dblclick=$ctrl.editWorkerItem(worker._id)>{{worker.Department.name}}</span><!-- <input ng-show="worker._id === $ctrl.workerId" ng-model="worker.DepartmentId" autofocus /> --><select ng-show="worker._id === $ctrl.workerId" class=form-control ng-model=worker.DepartmentId name=department ng-options="department._id as department.name for department in $ctrl.departments" required></select></td><td>{{worker.createdAt | date:\'medium\'}}</td><td ng-click=$ctrl.openLoadTime(worker)><a href=#>Manage Load Time</a></td><td ng-show="worker._id === $ctrl.workerId"><button class="btn btn-primary btn-sm" ng-click=$ctrl.saveCurrentWorker(worker)>Save</button></td></tr></tbody></table></div></div></div>'),a.put("app/project/modals/projecthours.html",'<div class=container><header><p class=lead>Manage project hours - {{$ctrl.currentProject.name}}</p></header><div class=row><div class=col-sm-6><form class=form name=form ng-submit=$ctrl.saveAllocation(form) novalidate><div class=form-group ng-class="{ \'has-success\': form.name.$valid && $ctrl.submittedAllocation,\n                                            \'has-error\': form.name.$invalid && $ctrl.submittedAllocation }"><label>Name</label><select class=form-control ng-model=$ctrl.projecthours.workerid name=name ng-options="worker._id as worker.firstname for worker in $ctrl.workers" required><option value="">Select a person</option></select><p class=help-block ng-show="form.name.$error.required && $ctrl.submittedAllocation">A name is required</p></div><div class=form-group ng-class="{ \'has-success\': form.week.$valid && $ctrl.submittedAllocation,\n                                            \'has-error\': form.week.$invalid && $ctrl.submittedAllocation  || $ctrl.weekAllocatedError}"><label>Week(1-52)</label><input type=number name=week id=week ng-min=1 ng-max=52 class=form-control ng-model=$ctrl.projecthours.week required pattern=\\d+><p class=help-block ng-show="form.week.$error.required && $ctrl.submittedAllocation">A week is required</p><p class=help-block ng-show="form.week.$error.pattern && $ctrl.submittedAllocation">The number is not valid (range 1 - 80)</p><p class=help-block ng-show="form.week.$error.max && $ctrl.submittedAllocation">The number is not valid (range 1 - 80)</p><p class=help-block ng-show="$ctrl.weekAllocatedError && $ctrl.submittedAllocation">This week has been already assigned to this user. Double-click on the allocated hours below to edit.</p></div><div class=form-group ng-class="{ \'has-success\': form.hours.$valid && $ctrl.submittedAllocation,\n                                            \'has-error\': form.hours.$invalid && $ctrl.submittedAllocation }"><label>Hours</label><input type=number name=hours pattern=\\d+ class=form-control ng-min=1 ng-max=80 ng-model=$ctrl.projecthours.hours required><p class=help-block ng-show="form.hours.$error.required && $ctrl.submittedAllocation">Hours is required</p><p class=help-block ng-show="form.hours.$error.pattern && $ctrl.submittedWorkerLoad">The number is not valid (range 1 - 80)</p><p class=help-block ng-show="form.hours.$error.max && $ctrl.submittedWorkerLoad">The number is not valid (range 1 - 80)</p></div><div class=has-error ng-show="$ctrl.submittedAllocation && $ctrl.notEnoughHoursError"><p class=help-block>{{$ctrl.notEnoughHoursError}}</p></div><div><button class="btn btn-primary" type=submit>Add</button></div></form></div></div><hr><div class=row ng-if="$ctrl.projecthours.length > 0"><div class=col-sm-6><p class=lead><small>Double-click on the allocated hours below to edit.</small></p><table class=table><thead><tr class=row-label-header><th>First name</th><th>Week</th><th>Allocated hours</th></tr></thead><tbody><tr ng-repeat="allocation in $ctrl.projecthours"><td>{{allocation.Worker.firstname}}</td><td>{{allocation.weekenum}}</td><td><span ng-show="allocation._id != $ctrl.allocationId" ng-dblclick=$ctrl.editItem(allocation._id)>{{allocation.allocated}}</span> <input ng-show="allocation._id === $ctrl.allocationId" ng-model=allocation.allocated autofocus></td><td ng-show="allocation._id === $ctrl.allocationId"><button class="btn btn-primary btn-sm" ng-click=$ctrl.saveCurrentAllocation(allocation)>Save</button></td></tr></tbody></table></div></div><div class=row><div class=col-sm-6><div class=modal-footer><button class="btn btn-warning" type=button ng-click=$ctrl.cancel()>Cancel</button></div></div></div></div>'),
a.put("app/project/project.html",'<div class=container><div class=row><div class=col-sm-12><h1>Projects</h1></div><div class=col-sm-6><form class=form name=form ng-submit=$ctrl.save(form) novalidate><div class=form-group ng-class="{ \'has-success\': form.name.$valid && $ctrl.submitted,\n                                            \'has-error\': form.name.$invalid && $ctrl.submitted }"><label>Project Name</label><input name=name class=form-control ng-model=$ctrl.project.name required><p class=help-block ng-show="form.name.$error.required && $ctrl.submitted">A name is required</p></div><div class=form-group ng-class="{ \'has-success\': form.client.$valid && $ctrl.submitted,\n                                            \'has-error\': form.client.$invalid && $ctrl.submitted }"><label>Client</label><select class=form-control ng-model=$ctrl.worker.clientid name=client ng-options="client._id as client.name for client in $ctrl.clients" required><option value="">Select a client</option></select><p class=help-block ng-show="form.client.$error.required && $ctrl.submitted">A client is required</p></div><div><button class="btn btn-inverse btn-lg btn-register" type=submit>Save</button></div></form></div></div><hr><div class=row ng-if="$ctrl.projects.length > 0"><div class=col-sm-8><p class=lead><small>Double-click on the project name to edit</small></p><table class=table><thead><tr><th>Project name</th><th>Client</th><th>Created</th></tr></thead><tbody><tr ng-repeat="project in $ctrl.projects"><td><span ng-show="project._id != $ctrl.projectId" ng-dblclick=$ctrl.editProjectItem(project._id)>{{project.name}}</span> <input ng-show="project._id === $ctrl.projectId" ng-model=project.name autofocus></td><td><span ng-show="project._id != $ctrl.projectId" ng-dblclick=$ctrl.editProjectItem(project._id)>{{project.Client.name}}</span><!-- <input ng-show="worker._id === $ctrl.workerId" ng-model="worker.DepartmentId" autofocus /> --><select ng-show="project._id === $ctrl.projectId" class=form-control ng-model=project.ClientId name=client ng-options="client._id as client.name for client in $ctrl.clients" required></select></td><td>{{project.createdAt | date:\'medium\'}}</td><td ng-click=$ctrl.openAllocateHours(project)><a href=#>Manage hours</a></td><td ng-show="project._id === $ctrl.projectId"><button class="btn btn-primary btn-sm" ng-click=$ctrl.saveCurrentProject(project)>Save</button></td></tr></tbody></table></div></div></div>'),a.put("components/footer/footer.html","<div class=container><p></p></div>"),a.put("components/modal/modal.html",'<div class=modal-header><button ng-if=modal.dismissable type=button ng-click=$dismiss() class=close>&times;</button><h4 ng-if=modal.title ng-bind=modal.title class=modal-title></h4></div><div class=modal-body><p ng-if=modal.text ng-bind=modal.text></p><div ng-if=modal.html ng-bind-html=modal.html></div></div><div class=modal-footer><button ng-repeat="button in modal.buttons" ng-class=button.classes ng-click=button.click($event) ng-bind=button.text class=btn></button></div>'),a.put("components/navbar/navbar.html",'<div class="navbar navbar-default navbar-static-top" ng-controller=NavbarController><div class=container><div class=navbar-header><button class=navbar-toggle type=button ng-click="nav.isCollapsed = !nav.isCollapsed"><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a href=/ class=navbar-brand>Home</a></div><div uib-collapse=nav.isCollapsed class="navbar-collapse collapse" id=navbar-main><ul class="nav navbar-nav"><li ng-repeat="item in nav.menu" ui-sref-active=active><a ui-sref={{item.state}}>{{item.title}}</a></li><li ng-show=nav.isAdmin() ui-sref-active=active><a ui-sref=admin>Admin</a></li></ul><ul class="nav navbar-nav navbar-right"><li ng-hide=nav.isLoggedIn() ui-sref-active=active><a ui-sref=signup></a></li><li ng-hide=nav.isLoggedIn() ui-sref-active=active><a ui-sref=login></a></li><li ng-show=nav.isLoggedIn()><p class=navbar-text>Hello {{ nav.getCurrentUser().name }}</p></li><li ng-show=nav.isLoggedIn() ui-sref-active=active><a ui-sref=settings><span class="glyphicon glyphicon-cog"></span></a></li><li ng-show=nav.isLoggedIn()><a ui-sref=logout>Logout</a></li></ul></div></div></div>'),a.put("components/oauth-buttons/oauth-buttons.html",'<a ng-class=classes ng-click="OauthButtons.loginOauth(\'google\')" class="btn btn-social btn-google"><i class="fa fa-google-plus"></i> Connect with Google+</a>')}]);